const t=new Set(["String","Number","Boolean","Object","Array","Function","Date","RegExp","Error","Symbol","Promise","Set","Null","Undefined","Blob","Map","WeakMap","WeakSet","ArrayBuffer","DataView","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","URL","FormData","File"]),e=function(t){return Object.prototype.toString.call(t).slice(8,-1)},n=function(n,r){if(!t.has(n))throw new Error(`Invalid type: ${n}`);return"Blob"===n&&"undefined"!=typeof Blob?r instanceof Blob:e(r)===n},r=function(t){return"String"===e(t)},o=function(t){return"Number"===e(t)},i=function(t){if(null==t)return!1;if("number"==typeof t)return isFinite(t);if("string"==typeof t){const e=Number(t);return!isNaN(e)&&isFinite(e)&&""!==t.trim()}return!1},a=function(t){return"Boolean"===e(t)},s=function(t){return"Function"===e(t)},c=function(t){return"Null"===e(t)},u=function(t){return"Undefined"===e(t)},f=function(t){return"Blob"===e(t)||"undefined"!=typeof Blob&&t instanceof Blob},l=function(t){return"Object"===e(t)},h=function(t){return"Array"===e(t)},d=function(t){return"Element"===e(t)},m=function(t){return"NodeList"===e(t)},p=function(t){return"Date"===e(t)},w=function(t){return"RegExp"===e(t)},g=function(t){return"Error"===e(t)},y=function(t){return"Symbol"===e(t)},b=function(t){return"Promise"===e(t)},E=function(t){return"Set"===e(t)},D=function(t){return"Map"===e(t)},M=function(t){return"WeakMap"===e(t)},S=function(t){return"WeakSet"===e(t)},v=function(t){return"ArrayBuffer"===e(t)},Y=function(t){return"DataView"===e(t)},T=function(t){return"Int8Array"===e(t)},A=function(t){return"Uint8Array"===e(t)},$=function(t){return"Uint8ClampedArray"===e(t)},x=function(t){return"Int16Array"===e(t)},N=function(t){return"Uint16Array"===e(t)},I=function(t){return"Int32Array"===e(t)},_=function(t){return"Uint32Array"===e(t)},O=function(t){return"Float32Array"===e(t)},j=function(t){return"Float64Array"===e(t)},k=function(t){return"URL"===e(t)||"undefined"!=typeof URL&&t instanceof URL},F=function(t){return"FormData"===e(t)||"undefined"!=typeof FormData&&t instanceof FormData},L=function(t){return"File"===e(t)||"undefined"!=typeof File&&t instanceof File},U=function(t){return!t||"null"===t||"undefined"===t||"false"===t||"NaN"===t},R=function(t){return!U(t)},C={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"},P=function(t){if(!/(^\d{15}$)|(^\d{17}(\d|X|x)$)/.test(t))throw new Error("你输入的身份证长度或格式错误");const e=parseInt(t.substr(0,2));if(!C[e])throw new Error("你的身份证地区非法");const n=parseInt(t.substr(6,4),10),r=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),i=new Date(n,r-1,o);if(i.getFullYear()!==n||i.getMonth()+1!==r||i.getDate()!==o)throw new Error("身份证上的出生日期非法");const a=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];let s=0;for(let e=0;e<t.length-1;e++)s+=parseInt(t[e],10)*a[e];const c="10X98765432"[s%11];if(t[t.length-1].toUpperCase()!==c)throw new Error("你输入的身份证号非法");return!0},B=["Android","webOS","iPhone","iPad","iPod","BlackBerry","IEMobile","Opera Mini"],z=function(){return B.some(t=>navigator.userAgent.includes(t))},W=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},H=function(){return!z()},G=function(){const t=navigator.userAgent;for(let e=0;e<B.length;e++)if(-1!==t.indexOf(B[e]))return!1;return!0},J=function(){let t=navigator.userAgent;return/Android/i.test(t)?"Android":/iPhone|iPad|iPod/i.test(t)?"ios":/Windows Phone|IEMobile|WPDesktop/i.test(t)?"Windows Phone":/BlackBerry/i.test(t)?"BlackBerry":"Unknown"},q=function(){let t=navigator.userAgent,e=t.indexOf("Opera")>-1,n=t.indexOf("compatible")>-1&&t.indexOf("MSIE")>-1&&!e,r=t.indexOf("Trident")>-1&&t.indexOf("rv:11.0")>-1,o=t.indexOf("Edge")>-1&&!n,i=t.indexOf("Firefox")>-1,a=t.indexOf("Safari")>-1&&-1===t.indexOf("Chrome"),s=t.indexOf("Chrome")>-1&&t.indexOf("Safari")>-1;if(n){new RegExp("MSIE (\\d+\\.\\d+);").test(t);let e=parseFloat(RegExp.$1);return 7===e?"IE7":8===e?"IE8":9===e?"IE9":10===e?"IE10":"IE7以下"}return r?"IE11":o?"Edge":i?"FF":e?"Opera":a?"Safari":s?"Chrome":void 0},Z=[/\d/,/[a-z]/,/[A-Z]/,/[!@#$%^&*.\-_]/],V=function(t){let e=0;if(t.length<6)return e;for(let n=0;n<Z.length;n++)Z[n].test(t)&&e++;return e},Q={phone:/^1[3456789]\d{9}$/,tel:/^(\(\d{3,4}\)|\d{3,4}-)?\d{7,8}$/,card:/(^\d{15}$)|(^\d{17}(\d|X|x)$)/,pwd:/^[a-zA-Z\d_]{6,16}$/,postal:/^[1-9]\d{5}$/,QQ:/^[1-9][0-9]{4,}$/,email:/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/,money:/^\d+(\.\d{1,2})?$/,URL:/^((https?|ftp|file):\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w.-]*)*\/?$/,IP:/^((\d{1,2}|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d{2}|2[0-4]\d|25[0-5])$/,date:/^\d{4}-\d{2}-\d{2}(\s\d{2}:\d{2}:\d{2})?$/,number:/^[0-9]*$/,english:/^[a-zA-Z]+$/,chinese:/^[\u4E00-\u9FA5]+$/,lower:/^[a-z]+$/,upper:/^[A-Z]+$/,HTML:/<("[^"]*"|'[^']*'|[^'">])*>/},K=function(t,e){if("string"!=typeof t)return!1;const n=Q[e];return!!n&&n.test(t)},X=function(){return!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)};var tt=Object.freeze({__proto__:null,checkFormat:K,checkPasswordLevel:V,getBrowserType:q,getMobileEnv:J,getType:e,isArray:h,isArrayBuffer:v,isBlob:f,isBoolean:a,isCardID:P,isDataView:Y,isDate:p,isElement:d,isError:g,isFalse:U,isFile:L,isFloat32Array:O,isFloat64Array:j,isFormData:F,isFullScreen:X,isFunction:s,isInt16Array:x,isInt32Array:I,isInt8Array:T,isIos:W,isMap:D,isMobile:z,isNodeList:m,isNull:c,isNumber:o,isNumeric:i,isObject:l,isPC:H,isPcBrowser:G,isPromise:b,isRegExp:w,isSet:E,isString:r,isSymbol:y,isTrue:R,isType:n,isURL:k,isUint16Array:N,isUint32Array:_,isUint8Array:A,isUint8ClampedArray:$,isUndefined:u,isWeakMap:M,isWeakSet:S});const et=function(t=0,e=1,n=!0){if(!i(t)||!i(e))return void console.warn("min、max期望是Number类型或String类型的数字");if(t=Number(t),e=Number(e),isNaN(t)||isNaN(e))return void console.warn("min、max转换为数字后为NaN");const r=t+Math.random()*(e-t);return n?r:Math.floor(r)},nt=function(t,e,n){return t>e&&t<n},rt=function(t){if(!/^\d*(\.\d*)?$/.test(t))return void console.warn("num期望是Number类型或String类型的数字");const e=["零","一","二","三","四","五","六","七","八","九"],n=["","十","百","仟","萬","億","点",""],r=(""+t).replace(/(^0*)/g,"").split(".");let o="",i=0;if(r[0])for(let t=r[0].length-1;t>=0;t--){switch(i){case 0:o=n[7]+o;break;case 4:new RegExp("0{4}\\d{"+(r[0].length-t-1)+"}$").test(r[0])||(o=n[4]+o);break;case 8:o=n[5]+o,n[7]=n[5],i=0}i%4==2&&"0"!==r[0].charAt(t+2)&&"0"===r[0].charAt(t+1)&&(o=e[0]+o),"0"!==r[0].charAt(t)&&(o=e[r[0].charAt(t)]+n[i%4]+o),i++}else o=e[0];if(r.length>1&&r[1]){o+=n[6];for(let t=0;t<r[1].length;t++)o+=e[r[1].charAt(t)]}return"一十"===o&&(o="十"),o.startsWith("一")&&2===o.length&&!o.includes("点")&&(o=o.replace("一","")),o},ot=function(t){if("string"!=typeof t&&"number"!=typeof t)return void console.warn("num期望是Number类型或String类型的数字");let e=String(t);if(e=e.replace(/[, ¥]/g,"").trim(),!/^-?\d+(\.\d+)?$/.test(e))return console.warn("num期望是合法的数字格式"),"";const n=e.split("."),r=n[0],o=n[1]||"";if(console.log(r,o),r.length>10)return"";const i={0:"零",1:"壹",2:"贰",3:"叁",4:"肆",5:"伍",6:"陆",7:"柒",8:"捌",9:"玖"},a=["元","拾","佰","仟","万","拾","佰","仟","亿","拾"];let s=[];if("0"!==r)for(let t=0;t<r.length;t++){const e=r[t],n=r.length-t-1;let o=i[e];n<a.length&&"0"!==e&&(o+=a[n]),s.push(o)}let c=s.join("");if(c=c.replace(/零{2,}/g,"零"),c=c.replace("零亿","亿").replace("亿万","亿").replace("零万","万").replace("零元","元").replace(/零角|零分/g,""),o.length>0){const t=o.substring(0,2);for(let e=0;e<t.length;e++){const n=t[e];let r=i[n];0===e&&"0"!==n&&(r+="角"),1===e&&"0"!==n&&(r+="分"),c+=r}}return c.endsWith("元")&&(c+="整"),c},it=function(t){if(!/^\d*(\.\d*)?$/.test(t))return void console.warn("num期望是Number类型或String类型的数字");if(!t)return"0";const e=t.toString(),[n,r]=e.split("."),o=n.replace(/\B(?=(\d{3})+(?!\d))/g,",");return r?`${o}.${r}`:o},at=function(t,e=1){const n=[{value:1e18,symbol:"E"},{value:1e15,symbol:"P"},{value:1e12,symbol:"T"},{value:1e9,symbol:"G"},{value:1e6,symbol:"M"},{value:1e3,symbol:"k"}],r=Math.abs(t);for(let o=0;o<n.length;o++)if(r>=n[o].value)return(t/n[o].value).toFixed(e).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+n[o].symbol;return t.toString()};var st=Object.freeze({__proto__:null,inRange:nt,random:et,scientificFormatter:at,thousandSeparator:it,toChinese:rt,toCny:ot});const ct=function(t,e={}){if(null==t)return t;const n=(t=String(t)).length;let{char:r,startIndex:o,endIndex:i}={char:"*",startIndex:0,endIndex:t?.toString().length||0,...e};const a=Math.max(0,o),s=Math.min(n,i);if(a>=s)return t;const c=t.substring(0,a),u=t.substring(s);return c+r.repeat(s-a)+u},ut=function(t,e){if(null==t)return t;if(t=String(t),null==e)return t.replace(/^\s+|\s+$/g,"");{const n=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),r=new RegExp(`^[${n}]+|[${n}]+$`,"g");return t.replace(r,"")}},ft=function(t,e){if(null==t)return t;if(t=String(t),null==e)return t.replace(/\s+/g,"");const n=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),r=new RegExp(`[${n}]+`,"g");return t.replace(r,"")},lt=function(t,e){if(null==t)return t;if(t=String(t),null==e)return t.replace(/\s+$/,"");const n=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),r=new RegExp(`[${n}]+$`,"g");return t.replace(r,"")},ht=function(t,e){if(null==t)return t;if(t=String(t),null==e)return t.replace(/^\s+/,"");const n=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),r=new RegExp(`^[${n}]+`,"g");return t.replace(r,"")},dt=function(t){return null==t?t:String(t).toUpperCase()},mt=function(t){return null==t?t:(t=String(t)).replace(/\b\w+\b/g,function(t){return t.substring(0,1).toUpperCase()+t.substring(1)})},pt=function(t){return null==t?t:String(t).toLowerCase()},wt=function(t){return null==t?t:(t=String(t)).replace(/\b\w+\b/g,function(t){return t.substring(0,1).toLowerCase()+t.substring(1)})},gt=function(t=4,e,n){("number"!=typeof t||t<=0)&&(t=4),null!=n&&"string"==typeof n&&0!==n.length||(n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");const r=()=>{let e="";for(let r=0;r<t;r++){const t=Math.floor(Math.random()*n.length);e+=n[t]}return e};let o=r();if(e&&e===o){let t=0;const n=10;for(;e===o&&t<n;)o=r(),t++;if(e===o)throw new Error("无法生成不重复的验证码，请检查参数设置")}return o},yt=function(t,e){if(!t||!e||"string"!=typeof t||"string"!=typeof e)return 0;if(0===e.length)return 0;let n=0,r=0;for(;-1!==(r=t.indexOf(e,r));)n++,r+=e.length;return n},bt=function(t,e=0,n){return null==t?t:(t=String(t),(e=Math.floor(e)||0)<=t.length?t:t.padStart(e,n))},Et=function(t,e=0,n){return null==t?t:(t=String(t),(e=Math.floor(e)||0)<=t.length?t:t.padEnd(e,n))},Dt=["px","em","rem","ex","ch","vw","vh","vmin","vmax","%","cm","mm","in","pt","pc","deg","rad","grad","turn","s","ms","hz","khz","m","km","dm","cm","mm","μm","nm","kg","g","t","lb","oz","l","L","ml","km²","m²","cm²","mm²","km³","m³","cm³","mm³","ms","s","min","h","d","w","y","ns","ps","fs","B","KB","MB","GB","TB","PB","EB","ZB","YB","$","¥","Pa","atm","℃","A"],Mt=function(t,e=[]){if(null==t||"string"!=typeof t)return!1;const n=[...new Set([...Dt,...e])].join("|");return new RegExp(`^-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)(${n})$`,"i").test(t)&&!/^-?(?:\d+(?:\.\d+)?|\.\d+)$/.test(t)},St=function(t,e=[]){if(null==t||"string"!=typeof t)return t;if(!Mt(t,e))return t;const n=[...new Set([...Dt,...e])].map(t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),r=new RegExp(`(${n.join("|")})$`,"i");return t.replace(r,"")},vt=function(t,e="-"){return null==t?t:(t=String(t)).replace(/([a-z])([A-Z])/g,`$1${e}$2`).replace(/([A-Z])([A-Z][a-z])/g,`$1${e}$2`).replace(/[_\s]+/g,e).replace(new RegExp(`^${e}+`),"").replace(new RegExp(`${e}+$`),"").replace(new RegExp(`${e}+`,"g"),e).toLowerCase()},Yt=function(t){return null==t?t:(t=String(t)).replace(/[^a-zA-Z0-9]/g,"-").replace(/-+/g,"-").replace(/^-/,"").replace(/-$/,"").split("-").map((t,e)=>0===e?t.toLowerCase():t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()).join("")};var Tt=Object.freeze({__proto__:null,camelToKebab:vt,countInString:yt,desens:ct,hasUnit:Mt,kebabToCamel:Yt,padEnd:Et,padStart:bt,randomCode:gt,removeUnit:St,toLowerCase:pt,toLowerCaseFirst:wt,toUpperCase:dt,toUpperCaseFirst:mt,trim:ut,trimAll:ft,trimEnd:lt,trimStart:ht});function At(t){const e=new WeakSet;try{return function t(n){if(null===n||"object"!=typeof n)return JSON.stringify(n);if(e.has(n))return'"[Circular]"';if(e.add(n),Array.isArray(n))return"["+n.map(e=>t(e)).join(",")+"]";const r=Object.keys(n).sort(),o=[];for(const e of r)o.push(JSON.stringify(e)+":"+t(n[e]));return"{"+o.join(",")+"}"}(t)}catch(e){try{return JSON.stringify(t)}catch(e){return String(t)}}}const $t=function(t,e,n=0){if(null!=t){if(!h(t))throw new Error("The first argument of the find function must be an array");if(!s(e))throw new Error("The second argument of the find function must be a function");o(n)||(n=0),n<0&&(n=Math.max(0,t.length+n));for(let r=n;r<t.length;r++)if(e(t[r],r))return t[r]}},xt=function(t,e,n=0){if(null==t)return-1;if(!h(t))throw new Error("The first argument of the findIndex function must be an array");if(!s(e))throw new Error("The second argument of the findIndex function must be a function");o(n)||(n=0),n<0&&(n=Math.max(0,t.length+n));for(let r=n;r<t.length;r++)if(e(t[r],r))return r;return-1};const Nt=function(t,e,n){if(null==t&&(t=[]),!h(t))throw new Error("The first argument of the forEach function must be an array");return"AsyncFunction"===((e=s(e)?e:()=>{})&&e.constructor?e.constructor.name:"")?async function(t,e,n){if(h(t))for(let r=0;r<t.length;r++)await e.call(n,t[r],r,t)}(t,e,n):function(t,e,n){if(h(t))for(let r=0;r<t.length;r++)e.call(n,t[r],r,t)}(t,e,n)},It=function(t,e,n){if(null==t&&(t=[]),!h(t))throw new Error("The first argument of the map function must be an array");if(!s(e))throw new Error("The second argument of the map function must be a function");const r=[];for(let o=0,i=t.length;o<i;++o){let i=e.call(n,t[o],o,t);r.push(i)}return r},_t=function(t,e,n){if(null==t&&(t=[]),!h(t))throw new Error("The first argument of the join function must be an array");"string"==typeof e&&e||(e=",");return It(t,t=>n&&l(t)?t[n]:t).join(e)},Ot=function(t=[],e=1,n){if(null==t&&(t=[]),!h(t))throw new Error("The first argument of the sort function must be an array");const r=[].concat(t);if("function"==typeof e)return r.sort(e);return r.sort((t,r)=>{const o=n?t[n]:t,i=n?r[n]:r;switch(e){case 1:return o<i?-1:o>i?1:0;case 2:return o>i?-1:o<i?1:0;case 3:return Math.random()-.5;default:return 0}})},jt=function(t,e){if(null==t&&(t=[]),!h(t))throw new Error("The first argument of the unique function must be an array");if(e){const n=new Set;return t.filter(t=>{const r=t[e];return!n.has(r)&&(n.add(r),!0)})}{const e=new Set;return t.filter(t=>{if(l(t)){const n=At(t);return!e.has(n)&&(e.add(n),!0)}return!e.has(t)&&(e.add(t),!0)})}},kt=function(t,e,n){if(!h(t)||!h(e))throw new Error("The first and second parameters of the union function must be arrays");const r=[...t,...e];if(!n)return jt(r);const o=new Set;return r.filter(t=>{if(!l(t)||!(n in t))return!0;const e=t[n];return!o.has(e)&&(o.add(e),!0)})},Ft=function(t,e,n){if(!h(t)||!h(e))throw new Error("The first and second parameters of the intersect function must be arrays");if(n){const r=new Set(e.map(t=>t[n])),o=t.filter(t=>r.has(t[n])),i=new Set;return o.filter(t=>{const e=t[n];return!i.has(e)&&(i.add(e),!0)})}{const n=new Set(e),r=t.filter(t=>n.has(t)),o=new Set;return r.filter(t=>{if(l(t)){const e=At(t);return!o.has(e)&&(o.add(e),!0)}return!o.has(t)&&(o.add(t),!0)})}},Lt=function(t,e){if(!h(t))throw new Error("The first argument of the intersectInMatrix function must be an array");return 0===t.length?[]:1===t.length?[...t[0]]:t.reduce((t,n)=>Ft(t,n,e))},Ut=function(t,e){if(null==t&&(t=[]),!h(t))throw new Error("The first argument of the countInArray function must be an array");return null==e?0:t.reduce((t,n,r,o)=>s(e)?e(n,r,o)?t+1:t:n===e?t+1:t,0)},Rt=function(t,e,n="_xh"){null==t&&(t=[]);const r=JSON.parse(JSON.stringify(t)),o=[];return r.forEach(t=>{const r=o.findIndex(n=>n[e]===t[e]);-1===r?(t[n]=1,o.push(t)):(t[n]=o[r][n]+1,o.splice(r,1,t))}),r},Ct=function(t,e){if(null==t&&(t=[]),!h(t))throw new Error("The first argument of the groupByAttr function must be an array");if("string"!=typeof e)throw new Error("The second argument of the groupByAttr function must be a string");return t.reduce((t,n)=>{if(n&&"object"==typeof n&&e in n){const r=n[e],o=String(r);t[o]||(t[o]=[]),t[o].push(n)}else{const e="undefined";t[e]||(t[e]=[]),t[e].push(n)}return t},{})},Pt=function(t,e){if(null==t&&(t=[]),!h(t))throw new Error("The first argument of the groupBySize function must be an array");if(!Number.isInteger(e)||e<=0)throw new Error("The second argument of the groupBySize function must be a positive integer");return 0===t.length?[]:t.reduce((t,n,r)=>{const o=Math.floor(r/e);return t[o]||(t[o]=[]),t[o].push(n),t},[])},Bt=function(t){if(null==t)throw new TypeError("Cannot convert null or undefined to array");if("object"!=typeof t||"number"!=typeof t.length||t.length<0)throw new TypeError("Argument is not an array-like object");return Array.from?Array.from(t):"undefined"!=typeof Symbol&&Symbol.iterator in t?[...t]:Array.prototype.slice.call(t)},zt=function(t,e={}){if(null==t&&(t=[]),!h(t))throw new Error("The first argument of the arrayToTree function must be an array");const n={id:"id",children:"children",parentId:"parentId",...e};if("string"!=typeof n.id||"string"!=typeof n.parentId||"string"!=typeof n.children)throw new Error("Options id, parentId and children must be strings");if(0===t.length)return[];const r=[],o=new Map,i=[];for(let e=0;e<t.length;e++){if(!t[e]||"object"!=typeof t[e])throw new Error("Array elements must be objects");const r={...t[e]};r[n.children]=[],i.push(r),o.set(r[n.id],e)}for(let t=0;t<i.length;t++){const e=i[t],a=e[n.parentId];if(null==a||""===a)r.push(e);else{const t=o.get(a);void 0!==t?i[t][n.children].push(e):r.push(e)}}return r},Wt=function(t,e={}){if(null==t&&(t=[]),!h(t))throw new Error("The first argument of the treeToArray function must be an array");const n={children:"children",...e};if("string"!=typeof n.children)throw new Error("Option children must be a string");if(0===t.length)return[];const r=[];function o(t){if(!t||"object"!=typeof t)return;const e={...t};if(r.push(e),t[n.children]&&h(t[n.children])&&t[n.children].length>0)for(let e=0;e<t[n.children].length;e++)o(t[n.children][e])}for(let e=0;e<t.length;e++)o(t[e]);return r};function Ht(t,e,n,r="children",o="id"){if(null==t&&(t=[]),!h(t))throw new Error("The first argument must be an array");if("string"!=typeof e)throw new Error("The targetKey must be a string");if("string"!=typeof r)throw new Error("The childrenKey must be a string");if("string"!=typeof o)throw new Error("The backKey must be a string");if(0!==t.length)for(const e of t){const t=i(e,[]);if(t)return t}function i(t,a){if(!t||"object"!=typeof t)return null;if(t[e]===n)return[...a,t[o]];if(t[r]&&h(t[r])&&t[r].length>0)for(const e of t[r]){const n=i(e,[...a,t[o]]);if(n)return n}return null}}const Gt=function(t,e){if(null==t&&(t=[]),!h(t))throw new Error("The first argument of the max function must be an array");if(0===t.length)return;let n;if(e){if("string"!=typeof e)throw new Error("The second argument of the max function must be a string");n=t.map(t=>{if(t&&"object"==typeof t&&e in t)return t[e]})}else n=t;const r=n.filter(t=>"number"==typeof t&&!isNaN(t));return 0!==r.length?Math.max(...r):void 0},Jt=function(t,e){if(null==t&&(t=[]),!h(t))throw new Error("The first argument of the min function must be an array");if(0===t.length)return;let n;if(e){if("string"!=typeof e)throw new Error("The second argument of the min function must be a string");n=t.map(t=>{if(t&&"object"==typeof t&&e in t)return t[e]})}else n=t;const r=n.filter(t=>"number"==typeof t&&!isNaN(t));return 0!==r.length?Math.min(...r):void 0};var qt=Object.freeze({__proto__:null,arrayToTree:zt,countInArray:Ut,find:$t,findIndex:xt,findNodePath:Ht,forEach:Nt,groupByAttr:Ct,groupBySize:Pt,intersect:Ft,intersectInMatrix:Lt,join:_t,map:It,max:Gt,min:Jt,sort:Ot,tagDuplicates:Rt,toArray:Bt,treeToArray:Wt,union:kt,unique:jt});const Zt=function(t,e,n=void 0){if(!t)return n;if(!e)return t;const r=e.split(/\.|(?=\[)/g).filter(t=>""!==t);let o=t;for(let t=0;t<r.length;t++){if(null==o)return n;const e=r[t];try{if(e.startsWith("[")&&e.endsWith("]")){const t=e.slice(1,-1).replace(/['"]/g,"");o=o[isNaN(Number(t))?t:Number(t)]}else o=o[e]}catch(t){return n}}return void 0!==o?o:n};var Vt=Object.freeze({__proto__:null,chainGet:Zt});const Qt=function(t=new Date,e="YYYY-MM-DD HH:mm:ss"){if(!p(t)&&("string"==typeof t&&(t=/^[0-9]+$/.test(t)?parseInt(t,10):t.replace(/-/g,"/")),"number"==typeof t&&0===Math.floor(t/1e10)&&Math.floor(t/1e9)>0&&(t*=1e3),t=new Date(t),isNaN(t.getTime())))return;const n=t.getFullYear(),r=t.getMonth()+1,o=t.getDate(),i=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),c=t.getDay(),u=i%12||12,f=r.toString().padStart(2,"0"),l=o.toString().padStart(2,"0"),h=i.toString().padStart(2,"0"),d=u.toString().padStart(2,"0"),m=a.toString().padStart(2,"0"),w=s.toString().padStart(2,"0"),g={YYYY:n,M:r,MM:f,D:o,DD:l,H:i,HH:h,h:u,hh:d,m:a,mm:m,s:s,ss:w,WW:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][c]};return"string"!=typeof e&&(e="YYYY-MM-DD HH:mm:ss"),e.replace(/(YYYY|MM|M|DD|D|HH|H|hh|h|mm|m|ss|s|WW)+/g,(t,e)=>g[e]??t)},Kt=function(t=new Date,e=2,n=-1,r="YYYY-MM-DD"){p(t)||(t=new Date(t)),("number"!=typeof e||e<0||!isFinite(e))&&(e=2),e=Math.floor(e),-1!==n&&0!==n&&1!==n&&(n=-1);const o=[],i=new Date(t);if(-1===n)for(let t=e;t>=0;t--){const e=new Date(i);e.setDate(i.getDate()-t),o.push(Qt(e,r))}else if(1===n)for(let t=0;t<=e;t++){const e=new Date(i);e.setDate(i.getDate()+t),o.push(Qt(e,r))}else for(let t=-e;t<=e;t++){const e=new Date(i);e.setDate(i.getDate()+t),o.push(Qt(e,r))}return o},Xt=function(t=new Date){if(p(t)||(t=new Date(t)),isNaN(t.getTime()))throw new Error("Invalid date provided");const e=t.getFullYear(),n=t.getMonth();return new Date(e,n+1,0).getDate()},te=function(t=new Date){let e;if(e=p(t)?t.getFullYear():"string"==typeof t?parseInt(t,10):"number"==typeof t?t:(new Date).getFullYear(),isNaN(e))throw new Error("Invalid year provided");const n=new Date(e,0,1),r=new Date(e+1,0,1);return Math.round((r-n)/864e5)},ee=function(t=new Date,e=2,n=-1,r="YYYY-MM"){if(p(t)||(t=new Date(t)),isNaN(t.getTime()))throw new Error("Invalid date provided");("number"!=typeof e||e<0||!isFinite(e))&&(e=2),e=Math.floor(e),-1!==n&&0!==n&&1!==n&&(n=-1);const o=[],i=new Date(t);let a,s,c;-1===n?(a=new Date(i),a.setMonth(i.getMonth()-e),s=new Date(i),c=1):1===n?(a=new Date(i),s=new Date(i),s.setMonth(i.getMonth()+e),c=1):(a=new Date(i),a.setMonth(i.getMonth()-e),s=new Date(i),s.setMonth(i.getMonth()+e),c=1);const u=new Date(a);for(;u<=s;)o.push(Qt(new Date(u.getFullYear(),u.getMonth(),1),r)),u.setMonth(u.getMonth()+c);return o},ne=function(t=new Date,e="YYYY-MM"){if(p(t)||(t=new Date(t)),isNaN(t.getTime()))throw new Error("Invalid date provided");const n=t.getMonth(),r=3*Math.floor(n/3),o=new Date(t.getFullYear(),r,1);return Qt(o,e)},re=function(t=new Date){if(p(t)||(t=new Date(t)),isNaN(t.getTime()))throw new Error("Invalid date provided");const e=t.getFullYear(),n=t-new Date(e,0,1);return Math.floor(n/864e5)+1},oe=function(t=new Date){if(p(t)||(t=new Date(t)),isNaN(t.getTime()))throw new Error("Invalid date provided");const e=re(t),n=new Date(t.getFullYear(),0,1).getDay();return Math.ceil((e+n)/7)};class ie{constructor(t){if(t?p(t)?this.nowDate=t:this.nowDate=new Date(t):this.nowDate=new Date,isNaN(this.nowDate.getTime()))throw new Error("Invalid date provided");this.year=this.nowDate.getFullYear(),this.month=this.nowDate.getMonth(),this.day=this.nowDate.getDate(),this.week=this.nowDate.getDay()}getStartOfWeek(t=0,e="YYYY-MM-DD"){const n=new Date(this.nowDate),r=n.getDay(),o=0===r?6:r-1;let i=0;switch(t){case-1:i=-7;break;case 1:i=7}return n.setDate(n.getDate()-o+i),Qt(n,e)}getEndOfWeek(t=0,e="YYYY-MM-DD"){const n=new Date(this.nowDate),r=n.getDay(),o=0===r?0:7-r;let i=0;switch(t){case-1:i=-7;break;case 1:i=7}return n.setDate(n.getDate()+o+i),Qt(n,e)}getStartOfMonth(t=0,e="YYYY-MM-DD"){let n=this.year,r=this.month;switch(t){case-1:0===r?(n-=1,r=11):r-=1;break;case 1:11===r?(n+=1,r=0):r+=1}return Qt(new Date(n,r,1),e)}getEndOfMonth(t=0,e="YYYY-MM-DD"){let n=this.year,r=this.month;switch(t){case-1:0===r?(n-=1,r=11):r-=1;break;case 1:11===r?(n+=1,r=0):r+=1}const o=Xt(new Date(n,r,1));return Qt(new Date(n,r,o),e)}getStartOfQuarter(t=0,e="YYYY-MM-DD"){const n=new Date(this.nowDate);switch(t){case-1:n.setMonth(this.month-3);break;case 1:n.setMonth(this.month+3)}const r=ne(n),o=new Date(r).getFullYear(),i=new Date(r).getMonth();return Qt(new Date(o,i,1),e)}getEndOfQuarter(t=0,e="YYYY-MM-DD"){const n=new Date(this.nowDate);switch(t){case-1:n.setMonth(this.month-3);break;case 1:n.setMonth(this.month+3)}const r=ne(n),o=new Date(r).getFullYear(),i=new Date(r).getMonth()+2,a=Xt(new Date(o,i,1));return Qt(new Date(o,i,a),e)}getStartOfYear(t=0,e="YYYY-MM-DD"){let n=this.year;switch(t){case-1:n-=1;break;case 1:n+=1}return Qt(new Date(n,0,1),e)}getEndOfYear(t=0,e="YYYY-MM-DD"){let n=this.year;switch(t){case-1:n-=1;break;case 1:n+=1}const r=Xt(new Date(n,11,1));return Qt(new Date(n,11,r),e)}}const ae=function(t=new Date,e=0,n="YYYY-MM-DD"){p(t)||(t=new Date(t)),-1!==e&&0!==e&&1!==e&&(e=0),"string"!=typeof n&&(n="YYYY-MM-DD");try{return new ie(t).getStartOfWeek(e,n)}catch(t){throw new Error(`Failed to calculate start of week: ${t.message}`)}},se=function(t=new Date,e=0,n="YYYY-MM-DD"){p(t)||(t=new Date(t)),-1!==e&&0!==e&&1!==e&&(e=0),"string"!=typeof n&&(n="YYYY-MM-DD");try{return new ie(t).getEndOfWeek(e,n)}catch(t){throw new Error(`Failed to calculate end of week: ${t.message}`)}},ce=function(t=new Date,e=0,n="YYYY-MM-DD"){p(t)||(t=new Date(t)),-1!==e&&0!==e&&1!==e&&(e=0),"string"!=typeof n&&(n="YYYY-MM-DD");try{return new ie(t).getStartOfMonth(e,n)}catch(t){throw new Error(`Failed to calculate start of month: ${t.message}`)}},ue=function(t=new Date,e=0,n="YYYY-MM-DD"){p(t)||(t=new Date(t)),-1!==e&&0!==e&&1!==e&&(e=0),"string"!=typeof n&&(n="YYYY-MM-DD");try{return new ie(t).getEndOfMonth(e,n)}catch(t){throw new Error(`Failed to calculate end of month: ${t.message}`)}},fe=function(t=new Date,e=0,n="YYYY-MM-DD"){p(t)||(t=new Date(t)),-1!==e&&0!==e&&1!==e&&(e=0),"string"!=typeof n&&(n="YYYY-MM-DD");try{return new ie(t).getStartOfQuarter(e,n)}catch(t){throw new Error(`Failed to calculate start of quarter: ${t.message}`)}},le=function(t=new Date,e=0,n="YYYY-MM-DD"){p(t)||(t=new Date(t)),-1!==e&&0!==e&&1!==e&&(e=0),"string"!=typeof n&&(n="YYYY-MM-DD");try{return new ie(t).getEndOfQuarter(e,n)}catch(t){throw new Error(`Failed to calculate end of quarter: ${t.message}`)}},he=function(t=new Date,e=0,n="YYYY-MM-DD"){p(t)||(t=new Date(t)),-1!==e&&0!==e&&1!==e&&(e=0),"string"!=typeof n&&(n="YYYY-MM-DD");try{return new ie(t).getStartOfYear(e,n)}catch(t){throw new Error(`Failed to calculate start of year: ${t.message}`)}},de=function(t=new Date,e=0,n="YYYY-MM-DD"){p(t)||(t=new Date(t)),-1!==e&&0!==e&&1!==e&&(e=0),"string"!=typeof n&&(n="YYYY-MM-DD");try{return new ie(t).getEndOfYear(e,n)}catch(t){throw new Error(`Failed to calculate end of year: ${t.message}`)}},me=function(t=new Date,e=1,n="YYYY-MM-DD"){if(p(t)||(t=new Date(t)),isNaN(t.getTime()))throw new Error("Invalid date provided");"number"==typeof e&&isFinite(e)||(e=1),"string"!=typeof n&&(n="YYYY-MM-DD");const r=new Date(t);r.setDate(r.getDate()-e);const o=Qt(r,n);if(null===o)throw new Error("Failed to format date");return o},pe=function(t=new Date,e=new Date,n="YYYY-MM-DD"){if(p(t)||(t=new Date(t)),p(e)||(e=new Date(e)),isNaN(t.getTime()))throw new Error("Invalid start date provided");if(isNaN(e.getTime()))throw new Error("Invalid end date provided");let r,o;"string"!=typeof n&&(n="YYYY-MM-DD"),t>e?(r=new Date(e),o=new Date(t)):(r=new Date(t),o=new Date(e));const i=new Date(Qt(r,"YYYY-MM-DD")),a=new Date(Qt(o,"YYYY-MM-DD"));if("Invalid Date"===i.toString()||"Invalid Date"===a.toString())throw new Error("Failed to normalize dates");const s=[],c=new Date(i);for(;c<=a;){const t=Qt(new Date(c),n);if(null===t)throw new Error("Failed to format date");s.push(t),c.setDate(c.getDate()+1)}return s},we=function(t=new Date,e){"object"==typeof e&&null!==e||(e={});if(e=Object.assign({},{year:"年前",month:"月前",week:"周前",day:"天前",hour:"小时前",minute:"分钟前",second:"秒前",just:"刚刚"},e),p(t)||(t=new Date(t)),isNaN(t.getTime()))throw new Error("Invalid date provided");const n=3600,r=86400,o=604800,i=2592e3,a=31104e3,s=(Date.now()-Number(t))/1e3;return s<30?e.just:s<60?`${Math.floor(s)}${e.second}`:s<n?`${Math.floor(s/60)}${e.minute}`:s<r?`${Math.floor(s/n)}${e.hour}`:s<o?`${Math.floor(s/r)}${e.day}`:s<i?`${Math.floor(s/o)}${e.week}`:s<a?`${Math.floor(s/i)}${e.month}`:`${Math.floor(s/a)}${e.year}`},ge=function(t=30){let e=new Date;e.setHours(0,0,0,0);const n=[],r=1440/t;for(let o=0;o<r;o++){const r=new Date(e.getTime()+60*t*1e3*o),i=String(r.getHours()).padStart(2,"0"),a=String(r.getMinutes()).padStart(2,"0");n.push(`${i}:${a}`)}return n},ye=function(t=0,e=["时","分","秒"]){("number"!=typeof t||isNaN(t)||t<0)&&(t=0);const n=Math.floor(t/3600),r=Math.floor(t%3600/60),o=Math.floor(t%60);return n>0?n+e[0]+r+e[1]+o+e[2]:r>0?r+e[1]+o+e[2]:o+e[2]};var be=Object.freeze({__proto__:null,formatDate:Qt,getDateOffset:me,getDateRange:Kt,getDatesBetween:pe,getDayOfYear:re,getDaysInMonth:Xt,getDaysInYear:te,getEndOfMonth:ue,getEndOfQuarter:le,getEndOfWeek:se,getEndOfYear:de,getMonthsRange:ee,getStartMonthOfQuarter:ne,getStartOfMonth:ce,getStartOfQuarter:fe,getStartOfWeek:ae,getStartOfYear:he,getTimeSlotByStep:ge,getWeekOfYear:oe,sToHms:ye,timeAgo:we});const Ee=function(t,e=500,n=!1){let r,o,i,a,s;const c=function(){const u=+new Date-a;u<e&&u>0?r=setTimeout(c,e-u):(r=null,n||(s=t.apply(o,i),o=i=null))},u=function(...u){o=this,i=u,a=+new Date;const f=n&&!r;return r||(r=setTimeout(c,e)),f&&(s=t.apply(o,i),o=i=null),s};return u.cancel=function(){clearTimeout(r),r=null,o=i=null},u},De=function(t,e=500){let n,r;const o=function(...o){const i=+new Date;n&&i-n<e?(clearTimeout(r),r=setTimeout(()=>{n=+new Date,t.apply(this,o)},e)):(n=i,t.apply(this,o))};return o.cancel=function(){clearTimeout(r),r=null,n=null},o};var Me=Object.freeze({__proto__:null,debounce:Ee,throttle:De});const Se=function(t){if(null==t||"string"!=typeof t)return;if(t=t.trim(),/^#[a-zA-Z_][\w\-]*$/.test(t))return document.getElementById(t.slice(1));const e=document.querySelectorAll(t);return e&&0!==e.length?1===e.length?e[0]:e:void 0},ve=function(t,e){if("string"!=typeof e||""===e)return!1;if(t instanceof Element)return t.classList.contains(e);if(t instanceof NodeList||Array.isArray(t)){for(const n of t)if(n instanceof Element&&n.classList.contains(e))return!0;return!1}return!1},Ye=function(t,e){if("string"!=typeof e||""===e)return t;if(null==t)return t;if(t instanceof Element)t.classList.add(e);else if(t instanceof NodeList||Array.isArray(t)){for(const n of t)n instanceof Element&&n.classList.add(e);return t}return t},Te=function(t,e){if("string"!=typeof e||""===e)return t;if(t instanceof Element)t.classList.remove(e);else if(t instanceof NodeList||Array.isArray(t))for(const n of t)n instanceof Element&&n.classList.remove(e);return t},Ae=function(t,e,n){if(!(t instanceof Element||t instanceof NodeList||Array.isArray(t)))return t;if("string"!=typeof e||""===e)return t;if("string"!=typeof n||""===n)return t;if(t instanceof Element)t.classList.contains(e)&&(t.classList.remove(e),t.classList.add(n));else if(t instanceof NodeList||Array.isArray(t))for(const r of t)r instanceof Element&&r.classList.contains(e)&&(r.classList.remove(e),r.classList.add(n));return t},$e=function(t){if(!(t instanceof Element))return;if(!t.parentNode)return;const e=Array.from(t.parentNode.children).filter(e=>e!==t);return e.length>0?e:void 0},xe=function(t,e){if(t instanceof Element)try{if("string"!=typeof e)return console.dir(t),console.log(t.style),t.style||getComputedStyle(t,null);if(t.style&&void 0!==t.style[e]&&""!==t.style[e])return t.style[e];const n=getComputedStyle(t,null);return n&&(n[e]||n.getPropertyValue(e))||void 0}catch(t){return void console.warn(`Failed to get computed style for property '${e}':`,t)}},Ne=function(t,e={}){if(!(t instanceof Element||t instanceof NodeList||Array.isArray(t)))return t;if(!l(e))throw new TypeError("The second argument of addStyle function must be an object");if(0===Object.keys(e).length)return t;const n=Object.entries(e).map(([t,e])=>[t.replace(/([A-Z])/g,"-$1").toLowerCase(),e]),r=t=>{if(t instanceof Element)for(const[e,r]of n)try{t.style.setProperty(e,r)}catch(t){console.warn(`Failed to set style property ${e}:`,t)}};if(t instanceof Element)r(t);else if(t instanceof NodeList||Array.isArray(t))for(const e of t)e instanceof Element&&r(e);return t},Ie=function(t,e){if(t instanceof Element&&"string"==typeof e)try{t.insertAdjacentHTML("afterend",e)}catch(t){console.error("Failed to insert HTML:",t)}},_e=function(t,e){if(t instanceof Element&&"string"==typeof e)try{t.insertAdjacentHTML("beforebegin",e)}catch(t){console.error("Failed to insert HTML:",t)}};var Oe=Object.freeze({__proto__:null,addClass:Ye,addStyle:Ne,getSiblings:$e,getStyle:xe,hasClass:ve,insertAfter:Ie,insertBefore:_e,queryElement:Se,removeClass:Te,replaceClass:Ae});const je=function(t){if(Math.floor(t)===t)return 0;const e=t.toString();return-1===e.indexOf(".")?0:e.split(".")[1].length},ke=function(t){if(Math.floor(t)===t)return[t,1];const e=t.toString().toLowerCase();if(e.includes("e")){const[t,n]=e.split("e"),r=t.split("."),o=r[0],i=r[1]||"",a=o+i,s=-i.length+parseInt(n,10),c=Math.pow(10,Math.max(0,-s));return[parseInt(a,10)*Math.pow(10,Math.max(0,s)),c]}{const t=e.split("."),n=t[1]?.length??0,r=Math.pow(10,n);return[parseInt(t[0]+(t[1]||""),10),r]}},Fe=function(t,e){const[n,r]=ke(t),[o,i]=ke(e),a=r*i/Le(r,i);return(n*(a/r)+o*(a/i))/a};function Le(t,e){for(;0!==e;){let n=e;e=t%e,t=n}return t}const Ue=function(t,e){const[n,r]=ke(t),[o,i]=ke(e),a=r*i/Le(r,i);return(n*(a/r)-o*(a/i))/a},Re=function(t,e){const n=je(t)+je(e),[r]=ke(t),[o]=ke(e);return r*o/Math.pow(10,n)},Ce=function(t,e){if(0===e)throw new Error("Division by zero");const[n,r]=ke(t),[o,i]=ke(e);return n*i/(o*r)},Pe=function(t){return Array.isArray(t)&&0!==t.length?t.reduce(function(t,e){const n=parseFloat(e);if(isNaN(n)||!isFinite(n))throw new Error("Array contains non-numeric values");return Fe(t,n)},0):0},Be=function(t){return Array.isArray(t)&&0!==t.length?Ce(Pe(t),t.length):0},ze=function(t=0,e=0){if(0===e)return Math.ceil(t);const n=Math.pow(10,e);return Math.ceil(Ge(t*n,10))/n},We=function(t=0,e=0){if(0===e)return Math.floor(t);const n=Math.pow(10,e);return Math.floor(Ge(t*n,10))/n},He=function(t=0,e=0){if(0===e)return t>=0?Math.floor(t):Math.ceil(t);const n=Math.pow(10,e);return Math.trunc(Ge(t*n,10))/n},Ge=function(t=0,e=0){const n=Math.pow(10,e);return Math.round((t+Number.EPSILON)*n)/n};var Je=Object.freeze({__proto__:null,add:Fe,average:Be,ceil:ze,decimal:He,divide:Ce,floor:We,getDecimalLength:je,multiply:Re,round:Ge,subtract:Ue,sum:Pe});const qe=t=>{const e=(t=>({set(e,n){try{const r=h(n)||l(n)?JSON.stringify(n):n;t.setItem(e,r)}catch(e){throw console.error(`Failed to set ${t.constructor.name} item:`,e),e}},get(e){try{const n=t.getItem(e);return n?JSON.parse(n):null}catch{return null}},remove(e){t.removeItem(e)},clear(){t.clear()}}))(t);return{set:e.set,get:e.get,remove:e.remove,clear:e.clear}},{set:Ze,get:Ve,remove:Qe,clear:Ke}=qe(localStorage),{set:Xe,get:tn,remove:en,clear:nn}=qe(sessionStorage),rn=function(t,e,n={}){if(!t)throw new Error("Cookie key is required");const{expires:r,domain:o,path:i="/",secure:a,sameSite:s}=n;if(s&&!["Strict","Lax","None"].includes(s))throw new Error('SameSite must be one of "Strict", "Lax", or "None"');let c="object"==typeof e&&null!==e?JSON.stringify(e):e;const u=[`${encodeURIComponent(t)}=${encodeURIComponent(c)}`];if("number"==typeof r){const t=new Date(Date.now()+Math.floor(1e3*r));u.push(`expires=${t.toUTCString()}`)}o&&u.push(`domain=${o}`),i&&u.push(`path=${i}`),a&&u.push("secure"),s&&u.push(`samesite=${s}`),document.cookie=u.join("; ")},on=function(t){if(!t)return null;const e=document.cookie.split("; ").find(e=>decodeURIComponent(e.split("=")[0])===t);if(!e)return null;const n=decodeURIComponent(e.split("=").slice(1).join("="));try{return JSON.parse(n)}catch{return n}},an=function(t,e={}){rn(t,"",{...e,path:e.path||"/",expires:-1})};var sn=Object.freeze({__proto__:null,clearLocalStorage:Ke,clearSessionStorage:nn,getCookie:on,getLocalStorage:Ve,getSessionStorage:tn,removeCookie:an,removeLocalStorage:Qe,removeSessionStorage:en,setCookie:rn,setLocalStorage:Ze,setSessionStorage:Xe});const cn=function(t,e){try{const n=t||window.location.href,r=new URL(n);if(e)return r.searchParams.get(e);const o={};for(const[t,e]of r.searchParams)o[t]=e;return o}catch(e){return console.warn("Invalid URL provided to getUrlParams:",t),null}},un=function(t){if(!l(t))return"";const e=[];for(const[n,r]of Object.entries(t))null!=r&&e.push(`${encodeURIComponent(n)}=${encodeURIComponent(r)}`);return e.join("&")},fn=function(t,e){try{const n=new URL(t);return n.searchParams.delete(e),n.toString()}catch(e){return console.warn("Invalid URL provided to removeUrlParam:",t),t}};var ln=Object.freeze({__proto__:null,getUrlParams:cn,removeUrlParam:fn,toUrlParams:un});const hn=new Map([[".aac","audio/aac"],[".abw","application/x-abiword"],[".arc","application/x-freearc"],[".avi","video/x-msvideo"],[".azw","application/vnd.amazon.ebook"],[".bin","application/octet-stream"],[".bmp","image/bmp"],[".bz","application/x-bzip"],[".bz2","application/x-bzip2"],[".csh","application/x-csh"],[".css","text/css"],[".csv","text/csv"],[".doc","application/msword"],[".docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],[".eot","application/vnd.ms-fontobject"],[".epub","application/epub+zip"],[".gif","image/gif"],[".htm","text/html"],[".html","text/html"],[".ico","image/vnd.microsoft.icon"],[".ics","text/calendar"],[".jar","application/java-archive"],[".jpeg","image/jpeg"],[".jpg","image/jpeg"],[".js","text/javascript"],[".json","application/json"],[".jsonld","application/ld+json"],[".mid","audio/midi"],[".midi","audio/midi"],[".mjs","text/javascript"],[".mp3","audio/mpeg"],[".mpeg","video/mpeg"],[".mpkg","application/vnd.apple.installer+xml"],[".odp","application/vnd.oasis.opendocument.presentation"],[".ods","application/vnd.oasis.opendocument.spreadsheet"],[".odt","application/vnd.oasis.opendocument.text"],[".oga","audio/ogg"],[".ogv","video/ogg"],[".ogx","application/ogg"],[".otf","font/otf"],[".png","image/png"],[".pdf","application/pdf"],[".ppt","application/vnd.ms-powerpoint"],[".pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],[".rar","application/x-rar-compressed"],[".rtf","application/rtf"],[".sh","application/x-sh"],[".svg","image/svg+xml"],[".swf","application/x-shockwave-flash"],[".tar","application/x-tar"],[".tif","image/tiff"],[".tiff","image/tiff"],[".ttf","font/ttf"],[".txt","text/plain"],[".vsd","application/vnd.visio"],[".wav","audio/wav"],[".weba","audio/webm"],[".webm","video/webm"],[".webp","image/webp"],[".woff","font/woff"],[".woff2","font/woff2"],[".xhtml","application/xhtml+xml"],[".xls","application/vnd.ms-excel"],[".xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],[".xml","application/xml"],[".xul","application/vnd.mozilla.xul+xml"],[".zip","application/zip"],[".3gp","video/3gpp"],[".3g2","video/3gpp2"],[".7z","application/x-7z-compressed"]]),dn=t=>{if("string"!=typeof t)return;const e=t.toLowerCase().match(/\.[^.]+$/)?.[0];return e?hn.get(e):void 0},mn=(t,e)=>{const n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=e,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},pn=async(t,e)=>{try{const n=await fetch(t);if(!n.ok)return!1;if(!e){const t=n.headers.get("Content-Disposition");t&&t.includes("filename=")&&(e=t.split("filename=")[1].replace(/"/g,""))}if(!e)try{const{pathname:n}=new URL(t);e=n.split("/").pop()||"download"}catch{e="download"}const r=await n.blob();return mn(r,e),!0}catch(t){return console.error(t),!1}},wn=async(t,e)=>{if(!t)return!1;if("string"==typeof t&&/^https?:\/\//.test(t))return await pn(t,e);if(t instanceof Blob)return mn(t,e),!0;if(t instanceof Uint8Array||t instanceof ArrayBuffer){const n=dn(e)||"",r=new Blob([t],n?{type:n}:{});return mn(r,e),!0}if("string"==typeof t){const n=dn(e)||"text/plain",r=new Blob([t],{type:n});return mn(r,e),!0}const n=new Blob([JSON.stringify(t)],{type:"application/json"});return mn(n,e),!0};var gn=Object.freeze({__proto__:null,download:wn,forceDownloadByUrl:pn,getMimeType:dn,mimeTypeMap:hn});const yn=(t=0,e=0,n=0,r=0)=>{if([t,e,n,r].some(t=>"number"!=typeof t||t<=0))return;const o=Math.min(n/t,r/e);return{width:t*o,height:e*o,scale:o}},bn=t=>new Promise((e,n)=>{if(!t.length)return e([]);const r=new Array(t.length);let o=0,i=!1;t.forEach((a,s)=>{const c=new Image;c.src=a,c.onload=()=>{i||(r[s]=c,++o===t.length&&e(r))},c.onerror=()=>{i||(i=!0,n(new Error(`Failed to load image: ${a}`)))}})}),En=t=>{if(!(t instanceof ArrayBuffer||t instanceof Uint8Array))throw new Error("Buffer must be an ArrayBuffer or Uint8Array");const e=t instanceof Uint8Array?t:new Uint8Array(t),n=Array.from(e).map(t=>String.fromCharCode(t)).join(""),r=window.btoa(n),o=(t=>{if(t.length<4)return null;const e={"image/jpeg":[255,216,255],"image/png":[137,80,78,71],"image/gif":[71,73,70],"image/webp":[82,73,70,70,87,69,66,80,8]};for(const[n,r]of Object.entries(e))if(r.every((e,n)=>t[n]===e||8===n))return n;return null})(e)||"image/png";return`data:${o};base64,${r}`},Dn=(t,e=.8)=>new Promise(n=>{const r=new Image;r.crossOrigin="anonymous",r.onload=()=>{const t=document.createElement("canvas"),o=t.getContext("2d");t.width=r.width,t.height=r.height,o?.drawImage(r,0,0,t.width,t.height),n(t.toDataURL("image/jpeg",e))},r.src=t});var Mn=Object.freeze({__proto__:null,binaryToDataURL:En,calcScaleRatio:yn,compressImage:Dn,loadImages:bn});const Sn=function(t){return new Promise(function(e,n){const r=new XMLHttpRequest,o=(t.method||"GET").toUpperCase(),i=["GET","POST","PUT","DELETE","PATCH"].includes(o)?o:"GET";let a=t.url;if("GET"===i&&t.params&&l(t.params)){const e=un(t.params);if(e){const t=a.includes("?")?"&":"?";a+=t+e}}let s=t.data;"GET"!==i&&l(t.data)&&(s=JSON.stringify(t.data));const c=void 0===t.async||t.async,u=t.auth?.username||"",f=t.auth?.password||"";if(r.open(i,a,c,u,f),l(t.headers))for(const e in t.headers)Object.prototype.hasOwnProperty.call(t.headers,e)&&r.setRequestHeader(e,t.headers[e]);r.timeout=void 0!==t.timeout?t.timeout:15e3,t.cancelToken&&"object"==typeof t.cancelToken&&(t.cancelToken.cancel=function(t="请求取消"){r.abort(),n(new Error(t))});const h=t.responseType||"json";r.responseType="xml"===h?"document":"text",r.onload=function(){if(r.status>=200&&r.status<300||304===r.status)try{switch(h){case"json":const t=JSON.parse(r.responseText);e(t);break;case"xml":e(r.responseXML);break;default:e(r.responseText)}}catch(t){n(new Error("解析响应数据失败: "+t.message))}else n(new Error(`请求失败: ${r.status} ${r.statusText}`))},r.onerror=function(){n(new Error("网络错误"))},r.ontimeout=function(){n(new Error("请求超时"))},r.send("GET"===i?null:s)})};Sn.get=function(t,e={}){return Sn({url:t,method:"GET",...e})},Sn.post=function(t,e={},n={}){return Sn({url:t,method:"POST",data:e,...n})},Sn.put=function(t,e={},n={}){return Sn({url:t,method:"PUT",data:e,...n})},Sn.delete=function(t,e={}){return Sn({url:t,method:"DELETE",...e})},Sn.CancelToken=function(){this.cancel=null};const vn=function(t={}){const e=new AbortController,{signal:n}=e,r=(t.method||"GET").toUpperCase(),o=["GET","POST","PUT","DELETE","PATCH"].includes(r)?r:"GET";let i=t.url;if("GET"===o&&t.params){const e=un(t.params);i+=e?"?"+e:""}const a={...t};if("GET"!==o)if(l(t.data))if(a.body=JSON.stringify(t.data),a.headers){const t=a.headers;(t instanceof Headers?t.has("Content-Type")||t.has("content-type"):Object.hasOwn(t,"Content-Type")||Object.hasOwn(t,"content-type"))||(t instanceof Headers?t.set("Content-Type","application/json"):t["Content-Type"]="application/json")}else a.headers={"Content-Type":"application/json"};else t.data&&(a.body=t.data);const s=void 0!==t.timeout?t.timeout:15e3;let c=null;const u=setTimeout(()=>{e.abort(),c=new Error("请求超时")},s),f=t.responseType||"json";return new Promise((r,s)=>{t.cancelToken&&(t.cancelToken.cancel=(t="请求取消")=>{clearTimeout(u),e.abort(),s(new Error(t))}),fetch(i,{...a,method:o,signal:n}).then(t=>{if(clearTimeout(u),!t.ok)return s(new Error(`请求失败: ${t.status} ${t.statusText}`));switch(f){case"json":return t.json().then(r);case"text":return t.text().then(r);case"blob":return t.blob().then(r);default:r(t)}}).catch(t=>{clearTimeout(u),c?s(c):"AbortError"===t.name?s(new Error("请求被取消")):s(t)})})};vn.get=function(t,e={}){return vn({url:t,method:"GET",...e})},vn.post=function(t,e={},n={}){return vn({url:t,method:"POST",data:e,...n})},vn.put=function(t,e={},n={}){return vn({url:t,method:"PUT",data:e,...n})},vn.delete=function(t,e={}){return vn({url:t,method:"DELETE",...e})},vn.CancelToken=function(){this.cancel=null};var Yn=Object.freeze({__proto__:null,request:Sn,requestFetch:vn});const Tn=function(t){let e=t;if("string"==typeof e){const t=Se(e);e=t?t instanceof NodeList?t[0]:t:window}return e instanceof Element?{x:e.scrollLeft||0,y:e.scrollTop||0}:{x:window.pageXOffset||document.documentElement.scrollLeft||0,y:window.pageYOffset||document.documentElement.scrollTop||0}},An=function(t,e={}){let n=t;if("string"==typeof n){const t=Se(n);if(!t)return;n=t instanceof NodeList?t[0]:t}n&&n instanceof Element&&(e={behavior:"smooth",...l(e)?e:{}},n.scrollIntoView&&"function"==typeof n.scrollIntoView&&n.scrollIntoView(e))},$n=function(t=window,e={}){let n=t;if("string"==typeof n){const t=Se(n);n=t?t instanceof NodeList?t[0]:t:window}n&&"function"==typeof n.scrollTo?n.scrollTo({top:0,behavior:"smooth",...l(e)?e:{}}):console.warn("Element does not support scrollTo method")};class xn{constructor(t={}){const{dataList:e=[],attrName:n="",elAttrName:r="data-name",callback:o=()=>{},offsetTop:i=0}=t;this.dataList=Array.isArray(e)?e:[],this.attrName="string"==typeof n?n:"",this.elAttrName="string"==typeof r?r:"data-name",this.offsetTop=Number(i)||0,this.callback="function"==typeof o?o:()=>{},this.elementMap=new Map,this.t()}t(){this.dataList.forEach((t,e)=>{const n=this.attrName?t[this.attrName]:t;if(null==n)return;const r=document.querySelector(`[${this.elAttrName}="${n}"]`);r&&this.elementMap.set(e,r)})}o(t){const e=t.target;return e===document||e===document.body?window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0:e.scrollTop||0}handlerScroll(t){const e=this.o(t);let n=-1,r=null;for(let t=0;t<this.dataList.length;t++){const o=this.elementMap.get(t);o&&(e>=o.offsetTop-this.offsetTop&&(n=t,r=o))}if(-1!==n&&r)try{this.callback({scrollEl:t.target,currentEl:r,attrName:this.attrName,elAttrName:this.elAttrName,dataList:this.dataList,index:n,value:this.attrName?this.dataList[n][this.attrName]:this.dataList[n]})}catch(t){console.error("[ScrollView] Callback execution error:",t)}}}const Nn=function(t={}){return new xn(t)};var In=Object.freeze({__proto__:null,getScrollPosition:Tn,initScrollView:Nn,scrollIntoView:An,scrollToTop:$n});const _n=function(t){return null!=t&&t instanceof Element||(t=document.documentElement),t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():Promise.reject(new Error("Fullscreen API is not supported"))},On=function(){return document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen?document.msExitFullscreen():Promise.reject(new Error("Fullscreen API is not supported"))},jn=function(t,e){(null==t||"number"!=typeof t||t<=0)&&(t=16),(null==e||"number"!=typeof e||e<=0)&&(e=1920);let n=document.documentElement.clientWidth;return(!n||n<=0)&&(n=e),t*(n/e)};class kn{el;options={width:1920,height:1080,mode:"scaleToFill"};constructor(t,e={}){this.el=t,this.options={...this.options,...e},Ne(this.el,{position:"fixed",top:"0",left:"0",width:this.options.width+"px",height:this.options.height+"px",transformOrigin:"left top",backgroundSize:"100% 100%"}),this.resize()}resize(){let t=window.innerWidth/this.options.width,e=window.innerHeight/this.options.height,n=1;"scaleToFill"===this.options.mode&&(n=`scale(${t},${e})`),"aspectFit"===this.options.mode&&(n=`scale(${t})`),this.el.style.transform=n}}const Fn=function(t,e={}){if(!t)throw new Error("el is required");return new kn(t,e)};var Ln=Object.freeze({__proto__:null,enterFullscreen:_n,exitFullscreen:On,initDataView:Fn,resizeFontSize:jn});const Un=function(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t);if(t instanceof RegExp)return new RegExp(t);if(t instanceof Map){const e=new Map;return t.forEach((t,n)=>{e.set(n,Un(t))}),e}if(t instanceof Set){const e=new Set;return t.forEach(t=>{e.add(Un(t))}),e}let e=Array.isArray(t)?[]:{};for(let n in t)t.hasOwnProperty(n)&&(e[n]=Un(t[n]));return e},Rn=function(){return"#"+(t=(16777216*Math.random()|0).toString(16),new Array(7-t.length).join("0")+t);var t},Cn=function(t,e=!0){return new Promise((n,r)=>{if(function(t){const e=document.getElementsByTagName("script");for(let n=0;n<e.length;n++)if(e[n].src===t)return!0;return!1}(t))n();else{const o=document.createElement("script");o.type="text/javascript",o.src=t,o.async=e,o.onload=()=>n(),o.onerror=e=>r(new Error(`Failed to load script: ${t}`)),document.head.appendChild(o)}})},Pn=function(t){return window.btoa(encodeURIComponent(t))},Bn=function(t){return decodeURIComponent(window.atob(t))},zn=function(t){if(!t)return t;const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n,r,o,i,a,s,c,u,f=0,l=0,h="",d=[];t=Hn(t);do{n=t.charCodeAt(f++),r=t.charCodeAt(f++),o=t.charCodeAt(f++),u=n<<16|r<<8|o,i=u>>18&63,a=u>>12&63,s=u>>6&63,c=63&u,d[l++]=e.charAt(i)+e.charAt(a)+e.charAt(s)+e.charAt(c)}while(f<t.length);h=d.join("");const m=t.length%3;return(m?h.slice(0,m-3):h)+"===".slice(m||3)},Wn=function(t){if(!t)return t;let e,n,r,o,i,a,s,c,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=0,l=0,h="",d=[];t+="";do{o=u.indexOf(t.charAt(f++)),i=u.indexOf(t.charAt(f++)),a=u.indexOf(t.charAt(f++)),s=u.indexOf(t.charAt(f++)),c=o<<18|i<<12|a<<6|s,e=c>>16&255,n=c>>8&255,r=255&c,d[l++]=64===a?String.fromCharCode(e):64===s?String.fromCharCode(e,n):String.fromCharCode(e,n,r)}while(f<t.length);return h=d.join(""),h=Gn(h),h},Hn=function(t){t=t.replace(/\r\n/g,"\n");let e="";for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},Gn=function(t){let e="",n=0,r=0,o=0,i=0;for(;n<t.length;)r=t.charCodeAt(n),r<128?(e+=String.fromCharCode(r),n++):r>191&&r<224?(o=t.charCodeAt(n+1),e+=String.fromCharCode((31&r)<<6|63&o),n+=2):(o=t.charCodeAt(n+1),i=t.charCodeAt(n+2),e+=String.fromCharCode((15&r)<<12|(63&o)<<6|63&i),n+=3);return e},Jn=function(t,e){let n=new Audio(t);return e&&(n.onloadedmetadata=e),n.src=t,n},qn=function(t){let e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML},Zn=function(t){let e=document.createElement("div");return e.innerHTML=t,e.firstElementChild||e.children[0]},Vn=function(t,e){if(!t&&!(t instanceof HTMLTextAreaElement||t instanceof HTMLInputElement))throw new Error("Invalid argument: dom must be a valid HTMLTextAreaElement or HTMLInputElement");let n=0;void 0!==t.selectionStart&&(n=t.selectionStart),Qn(t,e),t.focus();const r=n+e.length,o=Math.max(0,Math.min(t.value.length,r));t.setSelectionRange(o,o)},Qn=function(t,e){if(document.selection){t.focus();const n=document.selection.createRange();n.text=e,n.select()}else if(void 0!==t.selectionStart){const n=t.selectionStart,r=t.selectionEnd,o=t.scrollTop;t.value=t.value.substring(0,n)+e+t.value.substring(r,t.value.length),o>0&&(t.scrollTop=o),t.focus(),t.selectionStart=n+e.length,t.selectionEnd=n+e.length}else t.value+=e,t.focus()},Kn=function(t){if(null==t)return"";const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x39;"};return t.toString().replace(/[&<>'"]/g,t=>e[t]||t)},Xn=function(t=""){if(null==t)return"";const e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#x39;":"'"};return String(t).replace(/&(amp|lt|gt|quot|#39|#x39);/g,t=>e[t]||t)},tr=function(t,e){const n=t.split(".").map(Number),r=e.split(".").map(Number),o=Math.max(n.length,r.length);for(let t=0;t<o;t++){const e=n[t]||0,o=r[t]||0;if(e>o)return 1;if(e<o)return-1}return 0},er=async function(t){if(navigator.clipboard&&"function"==typeof navigator.clipboard.writeText)try{return await navigator.clipboard.writeText(t),!0}catch(t){return!1}else if(window.clipboardData&&"function"==typeof window.clipboardData.setData)try{return window.clipboardData.setData("Text",t),!0}catch(t){return!1}else{if(!document.queryCommandSupported||!document.queryCommandSupported("copy"))return!1;{let e=document.createElement("textarea");e.textContent=t,e.style.position="fixed",e.style.left="-9999px";try{document.body.appendChild(e),e.select();const t=document.execCommand("copy");return document.body.removeChild(e),t}catch(t){return e&&e.parentNode&&document.body.removeChild(e),!1}}}},nr=function(t=2e3){return new Promise(e=>setTimeout(e,t))},rr=function(t,e){const n=h(t)||m(t)?t:[t];if(n.forEach((t,e)=>{if(!(t&&t instanceof HTMLElement))throw new Error(`Invalid argument at index ${e}: element must be a valid HTMLElement`)}),"undefined"==typeof ResizeObserver)return console.warn("ResizeObserver is not supported in this browser"),()=>{};const r=new ResizeObserver(t=>{e&&"function"==typeof e&&e(t)});return n.forEach(t=>r.observe(t)),(t=null)=>{if(null===t)r.disconnect();else{(Array.isArray(t)?t:[t]).forEach(t=>{t&&t instanceof HTMLElement&&r.unobserve(t)})}}};class or{static DEFAULT_PING_MESSAGE=JSON.stringify({type:"ping"});static DEFAULT_RECONNECT_INTERVAL=5e3;static DEFAULT_MAX_RECONNECT_ATTEMPTS=5;static DEFAULT_HEARTBEAT_INTERVAL=3e4;static HEARTBEAT_RESPONSE_TYPE="tong";url="";socket=null;connectState=WebSocket.CLOSED;isReconnect;reconnectInterval;maxReconnectAttempts;#t=0;#e=null;isHeartbeat;heartbeatInterval;#n=null;#r=null;#o=or.DEFAULT_PING_MESSAGE;constructor(t,e={}){if(!window.WebSocket)throw new Error("当前环境不支持 WebSocket");if("object"!=typeof e||null===e)throw new TypeError("options 必须为一个对象");this.url=t,this.isReconnect=e.isReconnect??!0,this.reconnectInterval=e.reconnectInterval||or.DEFAULT_RECONNECT_INTERVAL,this.maxReconnectAttempts=e.maxReconnectAttempts??or.DEFAULT_MAX_RECONNECT_ATTEMPTS,this.isHeartbeat=e.isHeartbeat??!1,this.heartbeatInterval=e.heartbeatInterval??or.DEFAULT_HEARTBEAT_INTERVAL,"string"==typeof e.pingMessage?this.#o=e.pingMessage:l(e.pingMessage)||h(e.pingMessage)?this.#o=JSON.stringify(e.pingMessage):this.#o=or.DEFAULT_PING_MESSAGE,this.onOpen=this.#i.bind(this),this.onMessage=this.#a.bind(this),this.onError=this.#s.bind(this),this.onClose=this.#c.bind(this)}#u(){this.#f(),this.#n=setInterval(()=>{this.socket&&this.socket.readyState===WebSocket.OPEN&&this.send(this.#o)},this.heartbeatInterval)}#f(){this.#n&&(clearInterval(this.#n),this.#n=null)}#l(){-1===this.maxReconnectAttempts?(this.#e&&clearTimeout(this.#e),this.#e=setTimeout(()=>{this.socket&&this.socket.readyState!==WebSocket.CLOSED||this.#h()},this.reconnectInterval)):this.#t<this.maxReconnectAttempts?(this.#t+=1,console.log(`将在 ${this.reconnectInterval} ms 后进行第 ${this.#t} 次重连...`),this.#e&&clearTimeout(this.#e),this.#e=setTimeout(()=>{this.socket&&this.socket.readyState!==WebSocket.CLOSED||this.#h()},this.reconnectInterval)):(this.#d(),this.#m(WebSocket.CLOSED),console.warn("达到最大重连次数，放弃连接"))}#d(){this.#e&&(clearTimeout(this.#e),this.#t=0,this.#e=null)}#m(t){this.connectState=t}#i(){console.log("WebSocket 连接已建立"),this.#m(this.socket.readyState),this.isHeartbeat&&this.#u()}#a(t){let e=t.data;try{e=JSON.parse(e)}catch(t){}l(e)&&e.type===or.HEARTBEAT_RESPONSE_TYPE||this.#r&&"function"==typeof this.#r&&this.#r(e)}#s(t){console.error("WebSocket 错误:",t)}#c(){console.log("WebSocket 连接失败或关闭"),this.#f(),this.connectState===WebSocket.OPEN||this.#e?this.isReconnect&&this.#l():this.connectState===WebSocket.CLOSING?(this.#d(),this.#p(),this.#m(this.socket.readyState),this.socket=null):this.#m(this.socket.readyState)}#p(){this.socket&&(this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("message",this.onMessage),this.socket.removeEventListener("error",this.onError),this.socket.removeEventListener("close",this.onClose))}#h(){this.#p();try{this.socket=new WebSocket(this.url),this.#m(this.socket.readyState),this.socket.addEventListener("open",this.onOpen),this.socket.addEventListener("message",this.onMessage),this.socket.addEventListener("error",this.onError),this.socket.addEventListener("close",this.onClose)}catch(t){console.error("创建 WebSocket 实例失败:",t)}}connect(){this.#f(),this.#d(),this.#h()}send(t){this.socket&&this.socket.readyState===WebSocket.OPEN?l(t)||h(t)?this.socket.send(JSON.stringify(t)):this.socket.send(t):console.warn("WebSocket 未连接或未打开")}close(){if(this.socket){if(this.socket.readyState===WebSocket.CLOSED)return void console.log("WebSocket 已关闭");this.socket.close(),this.#m(this.socket.readyState)}else console.warn("WebSocket 未连接或未打开")}setMessageHandler(t){this.#r=t}}const ir={...st,...Tt,...qt,...Vt,...be,...Me,...Oe,...tt,...Je,...sn,...ln,...gn,...Mn,...Yn,...In,...Ln,...Object.freeze({__proto__:null,WebSocketUtil:or,addScript:Cn,atob:Bn,base64_decode:Wn,base64_encode:zn,btoa:Pn,compareVersion:tr,copyToClipboard:er,deepClone:Un,domToString:qn,escapeHTML:Kn,getRandomColor:Rn,insertAtCursor:Qn,loadAudio:Jn,resizeObserver:rr,setCursorPosition:Vn,stringToDom:Zn,unescapeHTML:Xn,utf8_decode:Gn,utf8_encode:Hn,wait:nr})};export{or as WebSocketUtil,Fe as add,Ye as addClass,Cn as addScript,Ne as addStyle,zt as arrayToTree,Bn as atob,Be as average,Wn as base64_decode,zn as base64_encode,En as binaryToDataURL,Pn as btoa,yn as calcScaleRatio,vt as camelToKebab,ze as ceil,Zt as chainGet,K as checkFormat,V as checkPasswordLevel,Ke as clearLocalStorage,nn as clearSessionStorage,tr as compareVersion,Dn as compressImage,er as copyToClipboard,Ut as countInArray,yt as countInString,Ee as debounce,He as decimal,Un as deepClone,ir as default,ct as desens,Ce as divide,qn as domToString,wn as download,_n as enterFullscreen,Kn as escapeHTML,On as exitFullscreen,$t as find,xt as findIndex,Ht as findNodePath,We as floor,Nt as forEach,pn as forceDownloadByUrl,Qt as formatDate,q as getBrowserType,on as getCookie,me as getDateOffset,Kt as getDateRange,pe as getDatesBetween,re as getDayOfYear,Xt as getDaysInMonth,te as getDaysInYear,je as getDecimalLength,ue as getEndOfMonth,le as getEndOfQuarter,se as getEndOfWeek,de as getEndOfYear,Ve as getLocalStorage,dn as getMimeType,J as getMobileEnv,ee as getMonthsRange,Rn as getRandomColor,Tn as getScrollPosition,tn as getSessionStorage,$e as getSiblings,ne as getStartMonthOfQuarter,ce as getStartOfMonth,fe as getStartOfQuarter,ae as getStartOfWeek,he as getStartOfYear,xe as getStyle,ge as getTimeSlotByStep,e as getType,cn as getUrlParams,oe as getWeekOfYear,Ct as groupByAttr,Pt as groupBySize,ve as hasClass,Mt as hasUnit,nt as inRange,Fn as initDataView,Nn as initScrollView,Ie as insertAfter,Qn as insertAtCursor,_e as insertBefore,Ft as intersect,Lt as intersectInMatrix,h as isArray,v as isArrayBuffer,f as isBlob,a as isBoolean,P as isCardID,Y as isDataView,p as isDate,d as isElement,g as isError,U as isFalse,L as isFile,O as isFloat32Array,j as isFloat64Array,F as isFormData,X as isFullScreen,s as isFunction,x as isInt16Array,I as isInt32Array,T as isInt8Array,W as isIos,D as isMap,z as isMobile,m as isNodeList,c as isNull,o as isNumber,i as isNumeric,l as isObject,H as isPC,G as isPcBrowser,b as isPromise,w as isRegExp,E as isSet,r as isString,y as isSymbol,R as isTrue,n as isType,k as isURL,N as isUint16Array,_ as isUint32Array,A as isUint8Array,$ as isUint8ClampedArray,u as isUndefined,M as isWeakMap,S as isWeakSet,_t as join,Yt as kebabToCamel,Jn as loadAudio,bn as loadImages,It as map,Gt as max,hn as mimeTypeMap,Jt as min,Re as multiply,Et as padEnd,bt as padStart,Se as queryElement,et as random,gt as randomCode,Te as removeClass,an as removeCookie,Qe as removeLocalStorage,en as removeSessionStorage,St as removeUnit,fn as removeUrlParam,Ae as replaceClass,Sn as request,vn as requestFetch,jn as resizeFontSize,rr as resizeObserver,Ge as round,ye as sToHms,at as scientificFormatter,An as scrollIntoView,$n as scrollToTop,rn as setCookie,Vn as setCursorPosition,Ze as setLocalStorage,Xe as setSessionStorage,Ot as sort,Zn as stringToDom,Ue as subtract,Pe as sum,Rt as tagDuplicates,it as thousandSeparator,De as throttle,we as timeAgo,Bt as toArray,rt as toChinese,ot as toCny,pt as toLowerCase,wt as toLowerCaseFirst,dt as toUpperCase,mt as toUpperCaseFirst,un as toUrlParams,Wt as treeToArray,ut as trim,ft as trimAll,lt as trimEnd,ht as trimStart,Xn as unescapeHTML,kt as union,jt as unique,Gn as utf8_decode,Hn as utf8_encode,nr as wait};
